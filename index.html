<!--
 Author:             Aaron Sierra

 Description:        Resume website

 Date Created:       TODO
 Date Last Modified: 09-01-2025 - Aaron Sierra - Changed styling to incoorproate Bulma CSS
                     09-01-2025 - Aaron Sierra - Added dynamic right-side vertical nav when scrolling

 #TODO:              09-01-2025 -  add screen interactions for scrolling
                                   (containers and stuff fade in and out)
                     09-01-2025 -  add "Walkthroughs" section for TryHackMe and stuff
                     09-01-2025 -  add Notable Books section where I write down books
                                   that I enjoyed reading.
                     09-01-2025 -  NEXT UP - Edit the "Experience" section to include more details
                                   about my roles and responsibilities. Same with competiton. Iron
                                   out kinks such as nav bar clicking, and pictures

 -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Aaron Sierra - Portfolio</title>
  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://unpkg.com/bulma@1.0.4/css/bulma.min.css">
  <!-- Custom minimal styles -->
  <link rel="stylesheet" href="custom.css">
</head>
<body class="has-background-dark has-text-light">

  <!-- Hero / Header -->
  <div class="header-wrapper" id="home">
    <section class="hero is-fullheight is-dark hero-banner">
      <!-- Mobile Nav -->
      <nav class="navbar is-fixed-top is-transparent is-hidden-desktop" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
          <a role="button" class="navbar-burger burger" data-target="mobile-nav" aria-label="menu" aria-expanded="false">
            <span></span><span></span><span></span>
          </a>
        </div>
        <div id="mobile-nav" class="navbar-menu">
          <div class="navbar-end">
            <a class="navbar-item" href="#home">Home</a>
            <a class="navbar-item" href="#about">About</a>
            <a class="navbar-item" href="#education-contact">Education</a>
            <a class="navbar-item" href="#skills">Skills</a>
            <a class="navbar-item" href="#certifications">Certifications</a>
            <a class="navbar-item" href="#resume">Resume</a>
            <a class="navbar-item" href="#leadership">Leadership</a>
            <a class="navbar-item" href="#experience">Experience</a>
            <a class="navbar-item" href="#competitions">Competitions</a>
          </div>
        </div>
      </nav>

      <div class="hero-body">
        <div class="container has-text-centered">
          <figure class="image hero-avatar is-inline-block mb-5">
            <!-- <img src="AaronGrad.jpeg" alt="Portrait of Aaron Sierra"> -->
          </figure>
          <h1 class="title is-size-1-desktop is-size-2-tablet is-size-3-mobile font-outline">
            Aaron Sierra
          </h1>
          <h2 class="subtitle is-4">
            Computer Scientist • Cybersecurity Focus
          </h2>
        </div>
      </div>

      <!-- Hero Desktop Menu -->
      <div class="hero-foot">
        <div class="hero-foot--wrapper">
          <div class="hero-menu-desktop">
            <nav class="hero-nav" aria-label="Primary site sections">
              <a href="#home" class="is-active">Home</a>
              <a href="#about">About</a>
              <a href="#education-contact">Education</a>
              <a href="#skills">Skills</a>
              <a href="#certifications">Certs</a>
              <a href="#resume">Resume</a>
              <a href="#leadership">Leadership</a>
              <a href="#experience">Experience</a>
              <a href="#competitions">Competitions</a>
            </nav>
          </div>
        </div>
      </div>
    </section>
  </div>
  <!-- Side Nav (updated: hover + scroll reveal) -->
  <div class="side-nav-wrapper collapsed" aria-label="Section navigation">
    <nav class="side-nav" role="navigation">
      <a href="#about">About</a>
      <a href="#education-contact">Education</a>
      <a href="#skills">Skills</a>
      <a href="#leadership">Leadership</a>
      <a href="#certifications">Certs</a>
      <a href="#resume">Resume</a>
      <a href="#experience">Experience</a>
      <a href="#competitions">Competitions</a>
    </nav>
  </div>

  <!-- About + Photo -->
  <section class="section" id="about">
    <div class="container">
      <div class="columns is-variable is-6 is-multiline">
        <div class="column is-half-desktop is-full-tablet">
          <div class="box hover-glow">
            <h3 class="title is-3 has-text-centered mb-4">Who Am I?</h3>
            <p>
              I have the experience and technical foundation of a computer scientist, which
              means I'm not just comfortable with coding, but I also enjoy digging into
              complex systems and understanding how they work. Computer Science is great, but my true passion is cybersecurity. I’ve explored many different areas within the field, but lately, I’ve been diving deeper into offensive security. I love learning and constantly expanding my skills to stay on top of the latest in cybersecurity.
            </p>
          </div>
        </div>
        <div class="column is-half-desktop is-full-tablet">
          <div class="box has-text-centered hover-glow">
            <figure class="image" style="max-width:360px;margin:0 auto;">
              <img src="AaronGrad.jpeg" alt="Professional headshot">
            </figure>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Education + Contact -->
  <section class="section" id="education-contact">
    <div class="container">
      <div class="columns is-variable is-6 is-multiline">
        <div class="column is-half-desktop is-full-tablet">
          <div class="box hover-glow">
            <h3 class="title is-4 has-text-centered">Education</h3>
            <h4 class="title is-5 mb-1">Baylor University</h4>
            <p>Bachelor of Science in Computer Science<br>Concentration in Cybersecurity</p>
            <p><strong>Graduation:</strong> May 2025</p>
            <p><strong>Courses Taken:</strong></p>
            <p>
              Computer Systems (x86 course), Data Structures, Software Eng II, Intro Algorithms,
              Database Design, Data Communications (Networking), Intro Cyber, Operating Systems,
              Foundations of Computing, Calc II, Linear Algebra, Cryptology, Statistics.
            </p>
          </div>
        </div>
        <div class="column is-half-desktop is-full-tablet">
          <div class="box hover-glow">
            <h3 class="title is-4 has-text-centered">Contact Info</h3>
            <p><strong>Email:</strong> aaronsierra.gen@gmail.com</p>
            <p><strong>Phone:</strong> 806-922-3947</p>
            <p>
              <strong>LinkedIn:</strong>
              <a href="https://www.linkedin.com/in/aaronsierra1/" target="_blank">
                www.linkedin.com/in/aaronsierra1/
              </a>
            </p>
            <p>
              <strong>GitHub:</strong>
              <a href="https://www.github.com/MildTreeRat/" target="_blank">
                www.github.com/MildTreeRat/
              </a>
            </p>
            <p>
              <strong>TryHackMe:</strong>
              <a href="https://tryhackme.com/p/aaronsierra" target="_blank">
                https://tryhackme.com/p/aaronsierra
              </a>
            </p>
            <p>
              <img src="https://tryhackme-badges.s3.amazonaws.com/aaronsierra.png" alt="TryHackMe badge" style="max-width:220px;">
            </p>
            <p>
              <strong>HackTheBox:</strong>
              <a href="https://app.hackthebox.com/profile/817994" target="_blank">
                https://app.hackthebox.com/profile/817994
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Skills -->
  <section class="section" id="skills">
    <div class="container">
      <div class="box hover-glow">
        <h3 class="title is-4 has-text-centered">Skills / Experience Working With</h3>
        <div class="tags are-medium is-flex is-flex-wrap-wrap">
          <span class="tag">Assembly (x86)</span>
          <span class="tag">Azure 365 Defender</span>
          <span class="tag">Bash</span>
          <span class="tag">Binary Ninja</span>
          <span class="tag">Bind9</span>
          <span class="tag">C</span>
          <span class="tag">C#</span>
          <span class="tag">C++</span>
          <span class="tag">Datagrams</span>
          <span class="tag">Docker</span>
          <span class="tag">ELK</span>
          <span class="tag">Ghidra</span>
          <span class="tag">Git</span>
          <span class="tag">GlobalProtect</span>
          <span class="tag">Gradle</span>
          <span class="tag">Graylog</span>
          <span class="tag">HTML/CSS</span>
          <span class="tag">Java</span>
          <span class="tag">Microsoft Sentinel</span>
          <span class="tag">Node.js</span>
          <span class="tag">PowerDNS</span>
          <span class="tag">Proxmox</span>
          <span class="tag">Python</span>
          <span class="tag">QRadar</span>
          <span class="tag">React</span>
          <span class="tag">SQL</span>
          <span class="tag">VMWare</span>
          <span class="tag">Wazuh</span>
          <span class="tag">WireShark</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Leadership Experience -->
  <section class="section" id="leadership">
    <div class="container">
      <h3 class="title is-3 has-text-centered">Leadership Experience</h3>
      <div class="columns is-multiline">
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Project Manager - Software Engineering II course</p>
          </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
            <div class="box hover-glow">
              <p class="has-text-weight-semibold">Project Manager - Team Sandilya (General Motors Software Engineer Project)</p>
            </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Cyber@Baylor Club Founding Officer (Treasurer)</p>
          </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Cyber Security Mentor - Cyber@Baylor</p>
          </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Former Offensive Security (Red Team) Captain for CCDC</p>
          </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Former Vice President - OSO Esports</p>
          </div>
        </div>
        <div class="column is-one-third-desktop is-half-tablet">
          <div class="box hover-glow">
            <p class="has-text-weight-semibold">Former Team Captain - Overwatch 2 (OSO Esports)</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Certifications -->
  <section class="section" id="certifications">
    <div class="container">
      <div class="box hover-glow has-text-centered">
        <h3 class="title is-4">Certifications</h3>
        <p>CompTIA Security+</p>
        <figure class="image" style="max-width:420px;margin:1.5rem auto;">
          <img src="CompTIASecurityPlus-1.jpg" alt="CompTIA Security+">
        </figure>
      </div>
    </div>
  </section>

  <!-- Resume -->
  <section class="section" id="resume">
    <div class="container">
      <div class="box hover-glow has-text-centered">
        <h3 class="title is-4">Resume (updated: 1-14-2025)</h3>
        <figure class="image" style="max-width:700px;margin:1.5rem auto;">
          <img src="Resume-1.jpg" alt="Resume">
        </figure>
      </div>
    </div>
  </section>


  <!-- Work Experience -->
  <section class="section" id="experience">
    <div class="container">
      <h3 class="title is-3 has-text-centered">Work Experience</h3>
      <div id="experience-dynamic"></div>
    </div>
  </section>

  <!-- Competitions & Extracurricular -->
  <section class="section" id="competitions">
    <div class="container">
      <h3 class="title is-3 has-text-centered">Competitions & Extracurricular</h3>
      <div id="competitions-dynamic"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer has-background-black has-text-centered has-text-grey-light">
    <p>&copy; <span id="year"></span> Aaron Sierra. All rights reserved.</p>
  </footer>

  <script>
    /* Year */
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    /* Mobile Burger */
    const burger = document.querySelector('.navbar-burger');
    const mobileMenu = document.getElementById('mobile-nav');
    if (burger && mobileMenu) {
      burger.addEventListener('click', () => {
        burger.classList.toggle('is-active');
        mobileMenu.classList.toggle('is-active');
      });
    }

    /* =========================
       Experience Data
    ========================== */
    const experiencesData = [
      {
        role: "Junior Software Engineer",
        company: "L3Harris",
        period: "June 2025 – Current",
        location: "Waco, TX",
        logo: "images/L3Harris.svg",
        logoAlt: "L3Harris logo",
        summary: "Contributing to Java/Gradle services and internal infrastructure; bootstrapped internal DNS (PowerDNS) improving service discovery & environment parity.",
        skills: ["Java 11","Gradle 8.9","Git 2.13","PowerDNS","Python 3","Artifactory"],
        projects: [
          { title: "Internal DNS Bootstrap", impact: "Automated PowerDNS zones; reduced manual host overrides and cut lookup latency ~40%." },
          { title: "Gradle Build Streamlining", impact: "Refactored multi-module build; CI pipeline time 11 → 7 mins." },
          { title: "Artifact Integrity Gate", impact: "Checksum + signature gate blocked unverified third‑party libs." }
        ]
      },
      {
        role: "Undergraduate Cybersecurity Research Assistant",
        company: "Baylor University",
        period: "Aug 2024 – May 2025",
        logo: "images/bu.svg",
        logoAlt: "Baylor University logo",
        summary: "Developed educational cybersecurity labs; executed CIIRC red teaming & post-mortems; exploring AI/ML applications in offensive security curriculum.",
        skills: ["AI/ML","WEKA","scikit-learn","KNN","Terraform","PenTesting"],
        projects: [
          { title: "CIIRC Offensive Testing", impact: "Defined ROE & executed controlled attacks; remediation report adopted next iteration." },
          { title: "ML Attack Pattern Prototype", impact: "Explored clustering feasibility for lateral movement detection baselines." },
          { title: "Lab Module Authoring", impact: "Drafted 3 lab scenarios (priv‑esc, log analysis, persistence) in pilot use." }
        ]
      },
      {
        role: "Software Engineer Intern",
        company: "General Motors",
        period: "May 2024 – Aug 2024",
        logo: "images/GM.svg",
        logoAlt: "General Motors logo",
        summary: "Built internal tooling for multi‑platform OSE workflows (Linux/Windows/macOS/mobile) using KISS & GRASP design principles.",
        skills: [".NET MAUI","C#","Agile","HashiCorp Vault","Microsoft Graph API","Insomnia"],
        projects: [
          { title: "Platform Scheduling App", impact: "Centralized OS eng tasks; reduced email coordination (qual +30% efficiency perception)." },
          { title: "Secrets Integration", impact: "Integrated Vault dynamic creds removing plaintext configs." },
          { title: "Graph API Sync Tool", impact: "Automated device inventory reconciliation (daily delta export)." }
        ]
      },
      {
        role: "Security Operations Center Intern",
        company: "Baylor University",
        period: "Aug 2023 – May 2024",
        logo: "images/bu.svg",
        logoAlt: "Security operations icon",
        summary: "Performed SIEM investigations (Splunk), log correlation, HIDS/NIDS alert triage, incident response documentation.",
        skills: ["Splunk","Python","Incident Investigation","Log Analysis","Detection Tuning"],
        projects: [
          { title: "Correlation Search Suite", impact: "Added 5 detections lowering MTTD ~25% for targeted behaviors." },
          { title: "Playbook Refinement", impact: "Streamlined escalation tree; reduced false escalations (analyst feedback)." }
        ]
      },
      {
        role: "Information Security Analyst Intern",
        company: "General Motors",
        period: "May 2023 – Aug 2023",
        logo: "images/GM.svg",
        logoAlt: "General Motors logo",
        summary: "Monitored cloud security (Sentinel/Defender), triaged alerts, automated enrichment with notebooks.",
        skills: ["KQL","Microsoft Sentinel","365 Defender","Azure","Jupyter","Automation"],
        projects: [
          { title: "Alert Enrichment Notebook", impact: "Cut manual lookup time ~30% (self‑reported)." },
          { title: "KQL Rule Optimization", impact: "Reduced false positive ratio via threshold/entity tuning." }
        ]
      },
      {
        role: "Student Network Technician",
        company: "Baylor University",
        period: "Aug 2022 – May 2023",
        logo: "images/bu.svg",
        logoAlt: "Network tools icon",
        summary: "Maintained campus network: cable fabrication, jack repairs, port activation, MDF/IDF upkeep.",
        skills: ["RJ45","Cable Testing","Port Provisioning","MDF/IDF Maintenance"],
        projects: [
          { title: "Port Activation Checklist", impact: "Standardized steps reducing reopen tickets." },
          { title: "Patch Panel Audit", impact: "Cataloged labeling discrepancies feeding remediation backlog." }
        ]
      },
      {
        role: "Cybersecurity Student Worker",
        company: "Baylor University",
        period: "Jan 2022 – Aug 2022",
        logo: "images/bu.svg",
        logoAlt: "Cyber lab icon",
        summary: "Provisioned Proxmox lab for CCDC; built multi‑service clusters & AD domains; authored deployment docs.",
        skills: ["Proxmox","Active Directory","Group Policy","MariaDB","MySQL","MongoDB","Tomcat","nginx","DNS","Bash","PowerShell"],
        projects: [
            { title: "AD Domain Lab Build", impact: "Scripts cut reprovision time from hours to <30 min." },
            { title: "Service Cluster Templates", impact: "Base images sped practice environment setup." },
            { title: "Documentation Portal", impact: "Centralized runbooks improved onboarding clarity." }
        ]
      }
    ];

    function renderExperienceCard(exp, index) {
      const altClass = index % 2 === 1 ? 'alt-right' : '';
      const skillsHTML = exp.skills.map(s => `<span class="tag">${s}</span>`).join("");
      const projectsHTML = exp.projects.map(p => `<li><strong>${p.title}:</strong> ${p.impact}</li>`).join("");
      return `
        <article class="box hover-glow experience-card ${altClass}">
          <div class="experience-layout">
            <figure class="experience-media">
              ${exp.logo ? `<img src="${exp.logo}" alt="${exp.logoAlt || ''}" loading="lazy" width="140" height="140">` : ""}
              <figcaption class="visually-hidden">${exp.company}</figcaption>
            </figure>
            <div class="experience-body">
              <h4 class="title is-4 mb-1">${exp.role}</h4>
              <p class="is-italic mb-3">${exp.company} — ${exp.period}</p>
              <p>${exp.summary}</p>
              <p class="has-text-weight-semibold mt-4 mb-2">Skills & Technologies:</p>
              <div class="tags is-flex is-flex-wrap-wrap">${skillsHTML}</div>
              <details class="notable-projects mt-4">
                <summary><strong>Notable Projects</strong></summary>
                <ul class="mt-3">${projectsHTML}</ul>
              </details>
            </div>
          </div>
        </article>`;
    }

    (function mountExperiences() {
      const mount = document.getElementById('experience-dynamic');
      if (mount) mount.innerHTML = experiencesData.map(renderExperienceCard).join("");
    })();

    /* =========================
       Competitions Data
    ========================== */
    const competitionsData = [
      {
        name: "Southwest Collegiate Cyber Defense Competition (CCDC)",
        short: "CCDC",
        period: "Aug 2022 – Present (2x Regional Qualifier)",
        logo: "images/swccdc.png",
        logoAlt: "CCDC logo",
        link: "https://southwestccdc.com/",
        summary: "High‑pressure blue team/incident response competition defending simulated corporate infrastructure while sustaining critical business services under live red team attack.",
        achievements: [
          "Led network mapping & service hardening (custom nmap & enum scripts).",
          "Authored password / LDAP policy baseline adopted by team practice environment.",
          "Prepared Active Directory escalation runbooks reducing recovery time during injects."
        ],
        metrics: [
          "Improved initial service hardening checklist coverage to >90% pre-start.",
          "Cut mean credential rotation time during inject phases by ~35%."
        ]
      },
      {
        name: "National Cyber League (NCL)",
        short: "NCL",
        period: "4 Seasons (Top 395 / 8,000 best finish)",
        logo: "images/ncl.png",
        logoAlt: "NCL logo",
        link: "https://nationalcyberleague.org/",
        summary: "Jeopardy‑style individual + team capture-the-flag challenges spanning cryptography, traffic & log analysis, web exploitation, enumeration, and OSINT.",
        achievements: [
          "Specialized in log analysis & crypto challenge tiers.",
          "Created internal cheat-sheet repo (hash ID, encoding pivots, PCAP workflow)."
        ],
        metrics: [
          "Consistent top 5% performance in log analysis subsection (internal tracking)."
        ]
      },
      {
        name: "TryHackMe",
        short: "TryHackMe",
        period: "Ongoing (Top 4%)",
        logo: "images/tryhackme.svg",
        logoAlt: "TryHackMe badge",
        link: "https://tryhackme.com/p/aaronsierra",
        summary: "Hands‑on labs from fundamentals through red team tactics: privilege escalation, lateral movement, exploitation chains, and Active Directory attack paths.",
        achievements: [
          "Completed red team pathway and AD attack rooms with personal notes.",
          "Built local repeatable lab (Proxmox) to replicate select scenarios offline."
        ],
        metrics: [
          "Maintained daily streak during intensive study blocks (skill retention)."
        ]
      },
      {
        name: "HiveStorm",
        short: "HiveStorm",
        period: "4× Competitor",
        logo: "images/hivestorm.webp",
        logoAlt: "HiveStorm logo",
        link: "https://www.hivestorm.org/",
        summary: "Defensive hardening competition focusing on rapid triage of misconfigurations, patch application, and service uptime scoring.",
        achievements: [
          "Created baseline Linux hardening script (sshd / logging / firewall templates).",
          "Led ticket triage prioritization (CVSS + service criticality)."
        ],
        metrics: [
          "Baseline script cut initial misconfiguration count by ~50% in later runs."
        ]
      },
      {
        name: "Esports Leadership (OSO / Overwatch 2)",
        short: "Esports",
        period: "Multiple Seasons",
        logo: "images/oso_esports.jpg",
        logoAlt: "Esports icon",
        link: "",
        summary: "Team coordination, scheduling, and strategic planning translating into transferable leadership & communication for technical teams.",
        achievements: [
          "Implemented review cadence mirroring agile retrospectives.",
          "Introduced stat tracking sheet to identify tactical improvement areas."
        ],
        metrics: [
          "Increased scrim efficiency (objective time usage) per internal tracking."
        ]
      }
    ];

    function renderCompetitionCard(c) {
      const achievementsHTML = c.achievements.map(a => `<li>${a}</li>`).join("");
      const metricsHTML = c.metrics?.length
        ? `<p class="has-text-weight-semibold mt-3 mb-1">Impact / Metrics:</p>
           <ul class="comp-metrics">${c.metrics.map(m => `<li>${m}</li>`).join("")}</ul>` : "";
      return `
        <article class="box hover-glow competition-card">
          <div class="competition-layout">
            <figure class="competition-media">
              ${c.logo ? `<img src="${c.logo}" alt="${c.logoAlt || ''}" loading="lazy" width="110" height="110">` : ""}
              <figcaption class="visually-hidden">${c.short || c.name}</figcaption>
            </figure>
            <div class="competition-body">
              <h4 class="title is-4 mb-1">${c.name}</h4>
              <p class="is-italic mb-2">${c.period}</p>
              <p>${c.summary}${c.link ? ` <a class="comp-link" href="${c.link}" target="_blank" rel="noopener">Site ↗</a>` : ""}</p>
              <details class="comp-details mt-3">
                <summary><strong>Highlights</strong></summary>
                <ul class="mt-3">${achievementsHTML}</ul>
                ${metricsHTML}
              </details>
            </div>
          </div>
        </article>`;
    }
    (function mountCompetitions() {
      const mount = document.getElementById('competitions-dynamic');
      if (mount) mount.innerHTML = competitionsData.map(renderCompetitionCard).join("");
    })();

    /* =========================
       Intersection Highlighting (Hero + Side)
    ========================== */
    const heroNavLinks = Array.from(document.querySelectorAll('.hero-nav a'));
    const sections = Array.from(document.querySelectorAll('section[id]'));

    function setHeroActive(id) {
      heroNavLinks.forEach(a => a.classList.toggle('is-active', a.getAttribute('href') === '#' + id));
    }

    const heroObserver = new IntersectionObserver(entries => {
      entries.forEach(e => { if (e.isIntersecting) setHeroActive(e.target.id); });
    }, { rootMargin: '-45% 0px -45% 0px', threshold: 0 });
    sections.forEach(s => heroObserver.observe(s));

    // Smooth scroll hero nav
    document.addEventListener('click', e => {
      const a = e.target.closest('.hero-nav a');
      if (!a) return;
      const id = a.getAttribute('href').slice(1);
      const el = document.getElementById(id);
      if (el) { e.preventDefault(); el.scrollIntoView({ behavior:'smooth' }); }
    });

    /* =========================
       RIGHT SIDE NAV (Hover + Scroll Reveal)
    ========================== */
    const sideWrapper = document.querySelector('.side-nav-wrapper');
    const sideNav = sideWrapper?.querySelector('.side-nav');
    const sideLinks = sideNav ? Array.from(sideNav.querySelectorAll('a')) : [];
    const sideSections = sideLinks.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

    function setSideActive(id) {
      sideLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + id));
    }
    const sideIO = new IntersectionObserver(entries => {
      entries.forEach(e => { if (e.isIntersecting) setSideActive(e.target.id); });
    }, { rootMargin: '-45% 0px -45% 0px', threshold: 0 });
    sideSections.forEach(sec => sideIO.observe(sec));

    // Reveal/hide logic
    let hideTimer = null;
    const SHOW_DURATION = 1800; // ms after scroll without activity

    function showSideNav(reason='') {
      if (!sideWrapper) return;
      sideWrapper.classList.remove('collapsed');
      sideWrapper.classList.add('expanded');
      sideWrapper.setAttribute('data-reason', reason);
      if (hideTimer) clearTimeout(hideTimer);
      hideTimer = setTimeout(() => {
        if (!sideWrapper.matches(':hover')) collapseSideNav();
      }, SHOW_DURATION);
    }
    function collapseSideNav() {
      if (!sideWrapper) return;
      sideWrapper.classList.add('collapsed');
      sideWrapper.classList.remove('expanded');
    }

    // Scroll -> show briefly
    let lastScrollY = window.scrollY;
    window.addEventListener('scroll', () => {
      const current = window.scrollY;
      if (Math.abs(current - lastScrollY) > 2) {
        showSideNav('scroll');
        lastScrollY = current;
      }
    }, { passive:true });

    // Hover region (wrapper) keeps open
    if (sideWrapper) {
      sideWrapper.addEventListener('mouseenter', () => showSideNav('hover'));
      sideWrapper.addEventListener('mouseleave', () => {
        if (hideTimer) clearTimeout(hideTimer);
        hideTimer = setTimeout(() => collapseSideNav(), 400);
      });
    }

    // Smooth scroll side nav
    if (sideNav) {
      sideNav.addEventListener('click', e => {
        const a = e.target.closest('a');
        if (!a) return;
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if (el) {
          e.preventDefault();
          el.scrollIntoView({ behavior:'smooth' });
          showSideNav('click');
        }
      });
    }

    // Start collapsed
    collapseSideNav();

    // Accessibility: keyboard focus expands
    sideLinks.forEach(link => {
      link.addEventListener('focus', () => showSideNav('focus'));
      link.addEventListener('blur', () => {
        if (!sideWrapper.contains(document.activeElement)) {
          hideTimer = setTimeout(() => collapseSideNav(), 600);
        }
      });
    });

    // Input modality helper
    document.body.addEventListener('mousedown', () => document.body.classList.add('using-mouse'));
    document.body.addEventListener('keydown', e => { if (e.key === 'Tab') document.body.classList.remove('using-mouse'); });
  </script>
</body>
</html>